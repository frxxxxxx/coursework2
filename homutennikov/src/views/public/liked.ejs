<%- include("../partials/head", { title: "–õ–∞–π–∫–Ω—É—Ç—ã–µ" }) %>
<%- include("../partials/header") %>

<main class="container page">
  <div class="section__head">
    <h1 class="section__title">–õ–∞–π–∫–Ω—É—Ç—ã–µ</h1>
    <div class="muted">–¢–≤–æ–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ ‚Äî –≤ –ø–æ—Ä—è–¥–∫–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ª–∞–π–∫–æ–≤.</div>
  </div>

  <div class="list">
    <% if (!posts || !posts.length) { %>
      <div class="empty">
        <div class="empty__title">–ü–æ–∫–∞ –ø—É—Å—Ç–æ</div>
        <div class="muted">–û—Ç–∫—Ä–æ–π –ø–æ—Å—Ç –∏ –Ω–∞–∂–º–∏ ‚ô• ‚Äî –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å.</div>
        <div style="margin-top:12px;">
          <a class="btn btn--primary" href="/feed">–ü–µ—Ä–µ–π—Ç–∏ –≤ –ª–µ–Ω—Ç—É</a>
        </div>
      </div>
    <% } %>

    <% (posts || []).forEach(p => { %>
      <article class="rowcard">
        <a class="rowcard__cover" href="/post/<%= p.slug %>">
          <% if (p.cover_url) { %>
            <img src="<%= p.cover_url %>" alt="" loading="lazy" />
          <% } else { %>
            <div class="rowcard__placeholder" aria-hidden="true"></div>
          <% } %>
        </a>
        <div class="rowcard__body">
          <div class="rowcard__meta">
            <a class="chip" href="/authors/<%= p.author_id %>"><%= p.author_name %></a>
            <span class="muted">‚Ä¢</span>
            <time class="muted" datetime="<%= p.published_at %>"><%= new Date(p.published_at).toLocaleDateString("ru-RU") %></time>
          </div>
          <h2 class="rowcard__title"><a href="/post/<%= p.slug %>"><%= p.title %></a></h2>
          <p class="rowcard__text"><%= p.excerpt || "" %></p>
          <div class="postcard__stats muted" style="margin-top:10px;">
            <span>üí¨ <%= p.comments_count %></span>
            <span>‚ô• <%= p.likes_count %></span>
          </div>
        </div>
        <div class="rowcard__action">
          <a class="btn btn--ghost" href="/post/<%= p.slug %>">–û—Ç–∫—Ä—ã—Ç—å ‚Üí</a>
        </div>
      </article>
    <% }) %>
  </div>
</main>

<%- include("../partials/footer") %>
