# PulseBlog — блог-платформа (Node.js + MySQL)

Это **реальная блог-платформа**, а не демо-страница: есть авторизация, кабинет автора, публикации, теги, лайки, комментарии и **админка** для управления пользователями/постами. В проекте есть **сидер** (10 пользователей, у каждого 3 поста = 30 постов) + отдельный админ.

## Стек и зачем он здесь

- **Node.js + Express** — HTTP сервер, маршрутизация, middleware.
- **MySQL** — хранение пользователей, постов, тегов, комментариев, лайков.
- **mysql2/promise** — удобные async/await запросы.
- **EJS** — серверный рендеринг шаблонов (быстро, просто, без фронтенд-сборки).
- **express-session + connect-flash** — сессии и флеш-сообщения (успех/ошибка).
- **bcryptjs** — хеширование паролей.
- **multer** — загрузка аватаров и обложек постов.
- **helmet** — базовая защита HTTP заголовками.
- **express-rate-limit** — ограничение частоты запросов.
- **morgan** — логирование запросов.
- **method-override** — поддержка PUT/DELETE из HTML-форм.

## Функционал

Публичная часть:
- Главная с новыми постами
- Лента `/feed` с поиском и фильтром по тегам
- Страница поста: теги, лайки, комментарии (гости тоже могут комментировать)
- Страница автора `/authors/:id`
- Теги `/tags/:slug`

Кабинет автора:
- CRUD постов (создать/редактировать/удалить)
- Статус post: `published` / `draft`
- Загрузка обложки
- Профиль: имя/био/аватар

Админка:
- Дашборд со статистикой
- Пользователи: смена роли `author/admin`, удаление (admin удалить нельзя)
- Посты: смена статуса, удаление

## Тестовые аккаунты после seed

- **admin**: `admin@blog.local` / `admin12345`
- **authors**: `user1@blog.local` … `user10@blog.local` / `user12345`

## Структура проекта

```
.
├─ app.js                         # точка входа, подключение middleware и роутов
├─ public/
│  ├─ css/main.css                # уникальный адаптивный дизайн PulseBlog
│  └─ uploads/                    # загрузки (создаётся автоматически)
├─ src/
│  ├─ controllers/                # контроллеры (логика страниц/форм)
│  ├─ db/
│  │  ├─ db.js                    # пул подключений MySQL
│  │  ├─ schema.sql               # схема БД
│  │  ├─ migrate.js               # миграция (создание таблиц)
│  │  └─ seed.js                  # сидер: 10 пользователей * 3 поста + admin
│  ├─ middleware/
│  │  ├─ attachUser.js            # подцепляет currentUser в res.locals
│  │  ├─ guards.js                # requireAuth / requireAdmin
│  │  ├─ upload.js                # multer для изображений
│  │  └─ errors.js                # 404/500
│  ├─ routes/                     # маршруты приложения
│  ├─ utils/
│  │  ├─ slugify.js               # генерация slug (включая русские символы)
│  │  └─ markdownLite.js          # лёгкий рендер md-like синтаксиса
│  └─ views/                      # EJS шаблоны + partials
└─ .env.example                   # пример переменных окружения
```

## Локальный запуск

### 1) Установить зависимости
```bash
npm i
```

### 2) Создать базу и таблицы
```bash
npm run seed
```

### 3) Запустить сервер
```bash
npm run dev
```

Ссылка: `http://localhost:3000`
